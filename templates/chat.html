{% extends 'base.html' %}
{% block content %}

    <form method="POST">
        <label for="chatname">Name:</label>
        <input type="text" id="chatname" name="chatname">
        <button>Chat to us</button>
    </form>
    
    <h2> Welcome, {{ username }}</h2>
    
    <form method = "POST">
        <textarea cols = "50" rows = "4" name = "chatmessage" id = "chatmessage"></textarea>
        <br>
        <button>SEND</button>
    </form>
    
    {% for message in chat_messages %}
        <p> ({{ message.timestamp }}) {{ message.from }}: {{ message.message }}</p>
    {% endfor %}


    <script>
        let textbox = document.getElementById("chatmessage")
        
        let timer = setTimeout(function(){
            location.reload();
        }, 5000);
        
        textbox.onkeydown = function(e) {
            
            clearTimeout(timer)
            
            timer = setTimeout(function(){
                location.reload();
            }, 5000);
        };
    </script>
{% endblock %}